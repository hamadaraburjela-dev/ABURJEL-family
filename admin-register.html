<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>تسجيل دخول المدير - نظام إدارة بيانات العائلة</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
	<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="style.css">
	<link rel="stylesheet" href="modern-theme.css">
	<style>
		body { font-family: 'Cairo', sans-serif; background: #f7fafc; }
		.auth-panel { max-width:420px; margin:60px auto; }
		.auth-card { border:0; border-radius:12px; box-shadow:0 6px 20px rgba(0,0,0,0.06); }
		.logo-small { width:72px; height:auto; }
	</style>
</head>
<body>
	<div class="container auth-panel">
		<div class="text-center mb-4">
			<img src="logo.webp" alt="شعار" class="logo-small">
			<h2 class="h4 mt-2">تسجيل دخول المدير</h2>
			<p class="text-muted small">الرجاء إدخال بيانات المدير للمتابعة إلى لوحة التحكم</p>
		</div>

		<div class="card auth-card">
			<div class="card-body p-4">
				<form id="adminLoginForm" novalidate>
					<div class="form-floating mb-3">
						<input type="text" class="form-control" id="username" placeholder="اسم المستخدم" required>
						<label for="username">اسم المستخدم</label>
					</div>

					<div class="form-floating mb-3">
						<input type="password" class="form-control" id="password" placeholder="كلمة المرور" required>
						<label for="password">كلمة المرور</label>
					</div>

					<div class="d-flex justify-content-between align-items-center mb-3">
						<a href="index.html" class="text-decoration-none">العودة للرئيسية</a>
						<a href="#" id="adminForgot" class="text-decoration-none">نسيت كلمة المرور؟</a>
					</div>

					<button type="submit" class="btn btn-primary w-100">
						<span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
						<span class="button-text">تسجيل الدخول</span>
					</button>
				</form>
			</div>
		</div>

	<p class="text-center text-muted small mt-3">حقوق الملكية © 2025 | م. حماده أبو رجيلة (قديح)</p>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
	<script src="assets/site.js"></script>
	<script src="script.js"></script>
	<script>
		// Small client-side enhancement: connect 'نسيت كلمة المرور؟' to the global handler if exists
		document.getElementById('adminForgot')?.addEventListener('click', function(e){
			e.preventDefault();
			if (typeof App !== 'undefined' && App.forgotPasswordModal) {
				// reuse existing modal flow when available
				App.loginPasswordModal?.hide?.();
				App.forgotPasswordModal.show();
			} else {
				Toastify({ text: 'اطلب إعادة تعيين كلمة المرور من المشرف الرئيسي', duration: 4000, gravity: 'top', position: 'center' }).showToast();
			}
		});

		// Attach submit handler that delegates to App.handleAdminLogin when App is initialized
		document.addEventListener('DOMContentLoaded', function attachAdminForm() {
			const form = document.getElementById('adminLoginForm');
			if (!form) return;
			form.addEventListener('submit', function(e) {
				e.preventDefault();
				if (window.App && typeof App.handleAdminLogin === 'function') {
					App.handleAdminLogin(e);
				} else {
					// Fallback: simple client-side notification
					Toastify({ text: 'جاري تهيئة النظام، يرجى المحاولة بعد لحظات', duration: 3000, gravity: 'top', position: 'center' }).showToast();
				}
			});
		});
	</script>
</body>
</html>
